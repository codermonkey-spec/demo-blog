### 一. threejs 介绍

我们想要做`web3d`开发势必要去学习`webgl`，但是`webgl`是一些底层 api，如果一上来就去学习`webgl`过于复杂，而`threejs`可以让我们先学习`web3d`，后面再去学习`webgl`;

下面是`threejs`中的一些模块的关系图

![模块关系图](https://threejs.org/manual/resources/images/threejs-structure.svg)

### 二. threejs 中的 <a to="/threejs-demo/01.threejsdemo">`hello world`</a>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import Basic from '!!raw-loader!../../src/pages/threejs-demo/01.threejsdemo';

<Tabs>
  <TabsItem value="threejs" label="threejs">
    <CodeBlock language="tsx">{Basic}</CodeBlock>
  </TabsItem>
</Tabs>

上面的代码是只包含了`threejs`最基础的几个模块`场景scene`,`相机camera`,`物体cube`,`渲染器renderer`,也是`threejs`中必不可少的模块

### 三. 在 threejs 中 <a to="/threejs-demo/02.controldemo">添加轨道</a>

```js
// 添加轨道，并且不断的刷新我们的页面，就能移动我们的物体了
// 将 renderer.render(scene, camera); 改成下面的代码

const control = new OrbitControls(camera, renderer.domElement);
function animate() {
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}

animate();
```

### 四.threejs 中添加<a to="/threejs-demo/03.axes">坐标轴</a>

```js
// 添加坐标轴
const axesHelper = new THREE.AxesHelper(5);
scene.add(axesHelper);
```

### 五. 通过`threejs`中的`Clock`来让物体旋转起来的 <a to="/threejs-demo/04.animate/01.clock">demo</a>

```js
// 将animate函数改成下面的代码
const clock = new THREE.Clock();

function animate() {
  const deltaTime = clock.getElapsedTime();

  cube.rotation.set(0, Math.sin(Math.PI * deltaTime), 0);
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}

animate();
```

### 六. 通过`gsap`动画库来实现一个旋转的立方体<a to="/threejs-demo/04.animate/02.jsap">demo</a>

```js
// 去掉const clock = new THREE.Clock();，改成下面的代码

gsap.to(cube.rotation, {
  y: Math.PI * 2,
  duration: 5,
});
function animate() {
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}
```

### 七。屏幕适配<a to="/threejs-demo/04.animate/03.dpr">demo</a>

```js
window.addEventListener("resize", () => {
  // 1. 更新相机的宽高比
  camera.aspect = window.innerWidth / window.innerHeight;

  // 2. 更新摄像机的投影矩阵
  camera.updateProjectionMatrix();

  // 3. 更新画布的大小
  renderer.setSize(window.innerWidth, window.innerHeight);

  // 4. 更新像素比
  renderer.setPixelRatio(window.devicePixelRatio);
});
```

### 八。最终的代码

import Result from '!!raw-loader!../../src/pages/threejs-demo/04.animate/03.dpr';

<Tabs>
  <TabsItem value="dpr" label="threejs">
    <CodeBlock language="tsx">{Result}</CodeBlock>
  </TabsItem>
</Tabs>
